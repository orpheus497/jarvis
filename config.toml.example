# Jarvis P2P Encrypted Messenger - Configuration Template
# Created by orpheus497
#
# Copy this file to ~/.jarvis/config.toml (or %APPDATA%\Jarvis\config.toml on Windows)
# Uncomment and modify values as needed
#
# All settings can be overridden with environment variables using JARVIS_ prefix
# Example: JARVIS_NETWORK_SERVER_PORT=6000
#
# See docs/CONFIGURATION.md for complete documentation

[network]
# P2P server listening port
server_port = 5000

# IPC port for client-server communication (localhost only)
ipc_port = 5999

# Host to bind to (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
default_host = "0.0.0.0"

# Connection timeout in seconds
connection_timeout = 30

# Socket timeout in seconds
socket_timeout = 10

# Heartbeat interval and timeout
heartbeat_interval = 30
heartbeat_timeout = 90

# Maximum reconnection attempts
max_reconnect_attempts = 5
reconnect_delay = 5

[crypto]
# Argon2 parameters for password hashing
argon2_time_cost = 3
argon2_memory_cost = 65536  # 64 MB
argon2_parallelism = 4

# Enable Double Ratchet for forward secrecy
enable_double_ratchet = true

# Maximum skipped message keys to store
ratchet_max_skip = 1000

[messages]
# Maximum message size (bytes)
max_message_size = 10485760  # 10 MB
max_text_message_size = 102400  # 100 KB

# Message queue settings (offline delivery)
queue_max_size = 1000  # per recipient
queue_max_age = 604800  # 7 days in seconds
queue_cleanup_interval = 3600  # 1 hour

[file_transfer]
# File transfer settings
chunk_size = 1048576  # 1 MB
max_file_size = 104857600  # 100 MB
timeout = 300  # 5 minutes
retry_attempts = 3
retry_delay = 2

[rate_limiting]
# Rate limiting for message sending
messages_per_minute = 60
messages_burst = 10

# Connection rate limiting
connections_per_minute = 5
ban_duration = 300  # 5 minutes

# Internet-facing connections (stricter)
internet_messages_per_minute = 30
internet_connections_per_minute = 2

[dht]
# DHT (Distributed Hash Table) settings for internet peer discovery
enabled = true
port = 6881

# Bootstrap nodes for joining the DHT network
# Add at least one bootstrap node to connect to the DHT
# Format: [["host", port], ["host2", port2], ...]
# bootstrap_nodes = [
#     ["192.168.1.100", 6881],
#     ["example.com", 6881]
# ]

replication_factor = 3
refresh_interval = 300  # 5 minutes

[discovery]
# mDNS/DNS-SD settings for local network discovery
mdns_enabled = true
mdns_announcement_interval = 60

# Discovery cache TTL
cache_ttl = 600  # 10 minutes

[nat_traversal]
# UPnP settings for automatic port mapping
upnp_enabled = true
upnp_discovery_timeout = 3
upnp_lease_duration = 3600  # 1 hour
upnp_renewal_interval = 1800  # 30 minutes

# STUN settings for public IP discovery
stun_enabled = true
stun_timeout = 10
stun_retry_attempts = 3

[security]
# IP whitelisting/blacklisting
# whitelist = ["192.168.1.0/24", "10.0.0.0/8"]
# blacklist = ["192.0.2.0/24"]

# Connection limits per IP
connection_limit_per_ip = 3

# Failed attempt tracking
ip_ban_threshold = 10
ip_ban_duration = 3600  # 1 hour

# Pre-authentication challenge timeout
preauth_challenge_timeout = 10

[backup]
# Automatic backup settings
enabled = true
interval = 86400  # 24 hours in seconds
retention_days = 30
max_count = 10
compression_level = 6

# Backup directory (relative to data directory)
backup_dir = "backups"

[ui]
# UI refresh rate (Hz)
refresh_rate = 10

# Maximum message history to display
max_message_history = 1000

# Notification timeout
notification_timeout = 5

# Typing indicator timeout
typing_indicator_timeout = 3

[search]
# Full-text search settings
results_per_page = 50
max_results = 1000
context_lines = 2

# Search result caching
cache_enabled = true
cache_max_size = 1000
cache_ttl = 300  # 5 minutes

[performance]
# Connection pooling
connection_pool_enabled = true
connection_pool_max_size = 50
connection_pool_min_size = 5
connection_idle_timeout = 300  # 5 minutes

# Message batching
message_batch_enabled = true
message_batch_size = 100
message_batch_timeout = 1.0  # 1 second

[logging]
# Logging configuration
level = "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Log to file (optional)
# file = "jarvis.log"

# Log format
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# Log rotation
max_bytes = 10485760  # 10 MB
backup_count = 5

[features]
# Feature flags (enable/disable features)
double_ratchet = true
file_transfer = true
voice_messages = false  # Requires sounddevice/soundfile
qr_codes = true
post_quantum_crypto = false  # Experimental
nat_traversal = true
peer_discovery = true
message_queue = true
enhanced_security = true
connection_pooling = true
message_batching = true
search_caching = true
